(()=>{"use strict";var e={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit",inactiveButtonClass:"form__submit_disable",inputErrorClass:"form__input_type_error",errorClass:"popup__error_visible",errorMessageEmptyInput:"Вы пропустили это поле.",errorMessageEmptyUrl:"Введите адрес сайта.",inputUrlClass:"form__input_type_url"},t={popups:document.querySelectorAll(".popup"),buttonClosePopup:document.querySelector(".popup__close"),buttonCloseModal:document.querySelector(".popup__button"),popupOpened:"popup_opened"},n={popupAdd:document.querySelector(".popup_type_add"),formAdd:document.querySelector(".form_type_add"),closePopupAdd:document.querySelector(".popup__close_type_add"),addButton:document.querySelector(".profile__add"),inputPlace:document.querySelector(".form__input_type_name"),inputSource:document.querySelector(".form__input_type_url")},r={editPopup:document.querySelector(".popup_type_edit"),nameInput:document.querySelector('input[name="name"]'),jobInput:document.querySelector('input[name="job"]'),formEdit:document.querySelector(".form_type_edit"),editBtn:document.querySelector(".profile__about-edit"),nameInfo:document.querySelector(".profile__about-name"),jobInfo:document.querySelector(".profile__about-caption")},o={photoModal:document.querySelector(".popup_type_photo"),photoImage:document.querySelector(".popup__image"),altModal:document.querySelector(".popup__title")},i={elementImage:".element__image",elementTitle:".element__title",elementLike:".element__button-like",elementDel:".element__button-delete",elementsContainer:document.querySelector(".elements")};function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._templateElement=document.querySelector(o),this._image=t.link,this._title=t.name,this._cardImage=r.elementImage,this._cardTitle=r.elementTitle,this._cardLike=r.elementLike,this._cardDel=r.elementDel,this._handlePreviewImage=n}var t,n;return t=e,(n=[{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(this._cardDel).addEventListener("click",(function(){return e._handleDeleteCard()})),this._element.querySelector(this._cardLike).addEventListener("click",(function(){return e._handleLikeCard()})),this._element.querySelector(this._cardImage).addEventListener("click",(function(){return e._handlePreviewImage(e._image,e._title)}))}},{key:"_handleDeleteCard",value:function(){this._element.remove(),this._element=null}},{key:"_handleLikeCard",value:function(){this._element.querySelector(this._cardLike).classList.toggle("element__button-like_active")}},{key:"_getTemplate",value:function(){return this._templateElement.content.children[0].cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(this._cardImage).src=this._image,this._element.querySelector(this._cardImage).alt=this._title,this._element.querySelector(this._cardTitle).textContent=this._title,this._element}}])&&s(t.prototype,n),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._form=n,this._inputList=Array.from(this._form.querySelectorAll(t.inputSelector)),this._submitButtonSelector=this._form.querySelector(t.submitButtonSelector),this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._errorMessageEmptyInput=t.errorMessageEmptyInput,this._errorMessageEmptyUrl=t.errorMessageEmptyUrl,this._inputUrlClass=t.inputUrlClass}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e){var t=e.nextElementSibling;this._setCustomError(e),e.classList.add(this._inputErrorClass),t.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(e){e.nextElementSibling.classList.remove(this._errorClass),e.classList.remove(this._inputErrorClass)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_setEventListeners",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._toggleButtonState(),e._checkInputValidity(t)}))}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._submitButtonSelector.setAttribute("disabled",!0),this._submitButtonSelector.classList.add(this._inactiveButtonClass)):(this._submitButtonSelector.removeAttribute("disabled"),this._submitButtonSelector.classList.remove(this._inactiveButtonClass))}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_setCustomError",value:function(e){var t=e.nextElementSibling;e.classList.contains(this._inputUrlClass)?t.textContent=this._errorMessageEmptyUrl:!e.value.length<=0?t.textContent=e.validationMessage:t.textContent=this._errorMessageEmptyInput}},{key:"enableValidation",value:function(){this._setEventListeners()}},{key:"clearValidationState",value:function(){var e=this;this._inputList.forEach((function(t){return e._hideInputError(t)})),this._toggleButtonState()}}])&&u(t.prototype,n),e}(),c=new l(e,r.editPopup);c.enableValidation();var p=new l(e,n.popupAdd);function m(e){e.classList.add(t.popupOpened),document.addEventListener("keydown",_)}function d(e){e.classList.remove(t.popupOpened),document.removeEventListener("keydown",_)}function _(e){"Escape"===e.key&&d(document.querySelector(".popup_opened"))}function h(e,t){o.photoImage.src=e,o.photoImage.alt=t,o.altModal.textContent=t,m(o.photoModal)}function f(e){return new a(e,h,i,"#template-element").generateCard()}p.enableValidation(),t.popups.forEach((function(e){e.addEventListener("click",(function(n){n.target.classList.contains(t.popupOpened)&&d(e),n.target.classList.contains("popup__close")&&d(e)}))})),[{name:"Эгейское море",link:"https://raw.githubusercontent.com/jusstes/mesto/main/src/images/markos-mant-unsplash.jpg"},{name:"Сибирь",link:"https://raw.githubusercontent.com/jusstes/mesto/main/src/images/vadim-sadovski-unsplash.jpg"},{name:"Домбай",link:"https://raw.githubusercontent.com/jusstes/mesto/main/src/images/kirill-pershin-unsplash.jpg"},{name:"Сидней",link:"https://raw.githubusercontent.com/jusstes/mesto/main/src/images/ivan-tsaregorodtsev-unsplash.jpg"},{name:"Лондон",link:"https://raw.githubusercontent.com/jusstes/mesto/main/src/images/watcharlie-unsplash.jpg"},{name:"Калифорния",link:"https://raw.githubusercontent.com/jusstes/mesto/main/src/images/logan-weaver-unsplash.jpg"}].forEach((function(e){var t=f(e);i.elementsContainer.append(t)})),n.addButton.addEventListener("click",(function(){n.formAdd.reset(),p.clearValidationState(),m(n.popupAdd)})),n.formAdd.addEventListener("submit",(function(e){e.preventDefault();var t=f({name:n.inputPlace.value,link:n.inputSource.value});i.elementsContainer.prepend(t),d(n.popupAdd)})),r.formEdit.addEventListener("submit",(function(e){e.preventDefault(),r.nameInfo.textContent=r.nameInput.value,r.jobInfo.textContent=r.jobInput.value,d(r.editPopup)})),r.editBtn.addEventListener("click",(function(){r.nameInput.value=r.nameInfo.textContent,r.jobInput.value=r.jobInfo.textContent,c.clearValidationState(),m(r.editPopup)}))})();